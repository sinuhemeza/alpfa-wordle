<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ALPFA WORDLE</title>
<style>
  body { font-family: Arial, sans-serif; display:flex; flex-direction:column; align-items:center; margin:20px; }
  h1 { margin-bottom:8px; }
  .grid { display:grid; grid-template-columns: repeat(5,64px); gap:6px; margin-bottom:12px; }
  .tile { width:64px; height:64px; border:2px solid #ccc; display:flex; align-items:center; justify-content:center; font-size:26px; font-weight:700; text-transform:uppercase; }
  .green { background:#6aaa64; color:#fff; border-color:#6aaa64; }
  .yellow { background:#c9b458; color:#fff; border-color:#c9b458; }
  .grey { background:#787c7e; color:#fff; border-color:#787c7e; }
  .controls { margin-bottom:8px; display:flex; gap:8px; align-items:center; }
  input[type="text"] {
    text-transform: uppercase;
    font-size: 22px;
    padding: 10px 16px;
    width: 180px;
    text-align: center;
    letter-spacing: 5px;
    border: 3px solid #6aaa64;
    border-radius: 8px;
    font-weight: 700;
    box-shadow: 0 0 8px rgba(106,170,100,0.7);
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
  }
  input[type="text"]:focus {
    outline: none;
    border-color: #4a7f43;
    box-shadow: 0 0 12px rgba(74,127,67,0.9);
  }
  button { padding:8px 10px; font-weight:700; cursor:pointer; }
  .keyboard { margin-top:16px; display:flex; flex-direction:column; gap:6px; user-select:none; }
  .key-row { display:flex; gap:6px; justify-content:center; }
  .key { min-width:38px; padding:10px 6px; border-radius:6px; border:none; font-weight:700; text-transform:uppercase; background:#d3d6da; cursor:pointer; }
  .key.green { background:#6aaa64; color:#fff; }
  .key.yellow { background:#c9b458; color:#fff; }
  .key.grey { background:#787c7e; color:#fff; }
  #message { min-height:22px; margin-top:8px; font-weight:700; }
  /* Hide the dictionary status span */
  #dictStatus {
    display: none;
  }
  /* Also hide the whole dictionary load status line */
  .small {
    display: none;
  }
</style>
</head>
<body>
  <h1>ALPFA WORDLE</h1>
  <div id="grid" class="grid" aria-hidden="true"></div>

  <div class="controls">
    <input id="guessInput" maxlength="5" autocomplete="off" autocapitalize="characters" />
    <button id="guessBtn">Enter</button>
  </div>

  <div id="message" role="status"></div>
  <div class="small">Dictionary load status: <span id="dictStatus">loading…</span></div>

  <div class="keyboard" id="keyboard" aria-hidden="true"></div>

<script>
/* ---------- CONFIG ---------- */
const correctWord = "ALPFA";
const maxAttempts = 6;
const wordListUrl = "https://raw.githubusercontent.com/tabatkins/wordle-list/main/words";

/* ---------- STATE ---------- */
let attempts = 0;
let gameOver = false;
let wordList = new Set();
const fallbackWords = ["ALPFA","APPLE","HOUSE","CHAIR","WATER","TABLE","PLANT","CALLS","MOUSE","BRAIN","HELLO"];

/* ---------- UI refs ---------- */
const grid = document.getElementById("grid");
const input = document.getElementById("guessInput");
const guessBtn = document.getElementById("guessBtn");
const message = document.getElementById("message");
const dictStatus = document.getElementById("dictStatus");
const keyboardDiv = document.getElementById("keyboard");

/* ---------- INITIAL GRID ---------- */
for (let i = 0; i < maxAttempts * 5; i++) {
  const tile = document.createElement("div");
  tile.className = "tile";
  grid.appendChild(tile);
}

/* ---------- KEYBOARD ---------- */
["QWERTYUIOP","ASDFGHJKL","ZXCVBNM"].forEach(row => {
  const rowDiv = document.createElement("div");
  rowDiv.className = "key-row";
  row.split("").forEach(letter => {
    const btn = document.createElement("button");
    btn.className = "key";
    btn.textContent = letter;
    btn.dataset.key = letter;
    btn.addEventListener("click", () => {
      if (gameOver) return;
      if (input.value.length < 5) input.value += letter;
      input.focus();
    });
    rowDiv.appendChild(btn);
  });
  keyboardDiv.appendChild(rowDiv);
});
const bottom = document.createElement("div");
bottom.className = "key-row";
const enterBtn = document.createElement("button");
enterBtn.className = "key";
enterBtn.textContent = "Enter";
enterBtn.dataset.key = "ENTER";
enterBtn.style.minWidth = "82px";
enterBtn.addEventListener("click", () => submitGuess());
bottom.appendChild(enterBtn);
const spaceLeft = document.createElement("div");
spaceLeft.style = "width:8px";
bottom.appendChild(spaceLeft);
const backBtn = document.createElement("button");
backBtn.className = "key";
backBtn.textContent = "Back";
backBtn.dataset.key = "BACK";
backBtn.addEventListener("click", () => {
  if (gameOver) return;
  input.value = input.value.slice(0, -1);
  input.focus();
});
backBtn.style.minWidth = "60px";
bottom.appendChild(backBtn);
keyboardDiv.appendChild(bottom);

/* ---------- DICTIONARY LOADING ---------- */
async function loadWordList() {
  try {
    const res = await fetch(wordListUrl);
    if (!res.ok) throw new Error("network");
    const text = await res.text();
    const words = text.split(/\r?\n/).map(w => w.trim()).filter(Boolean).map(w => w.toUpperCase());
    words.forEach(w => wordList.add(w));
    wordList.add("ALPFA"); // ensure ALPFA is allowed
    dictStatus.textContent = "loaded (" + wordList.size + " words)";
  } catch (err) {
    console.warn("Could not fetch word list:", err);
    fallbackWords.forEach(w => wordList.add(w));
    dictStatus.textContent = "failed to load; using small fallback list";
  }
}
loadWordList();

/* ---------- HELPERS ---------- */
function showMsg(txt, isError = false) {
  message.textContent = txt;
  message.style.color = isError ? "#b02a37" : "inherit";
}
function setKeyColor(letter, color) {
  const btn = document.querySelector(`.key[data-key="${letter}"]`);
  if (!btn) return;
  if (btn.classList.contains("green")) return;
  if (color === "green") {
    btn.classList.remove("yellow","grey"); btn.classList.add("green");
  } else if (color === "yellow") {
    if (!btn.classList.contains("green")) { btn.classList.remove("grey"); btn.classList.add("yellow"); }
  } else if (color === "grey") {
    if (!btn.classList.contains("green") && !btn.classList.contains("yellow")) btn.classList.add("grey");
  }
}

/* ---------- GAME LOGIC ---------- */
function submitGuess() {
  if (gameOver) return;
  const raw = input.value.toUpperCase().trim();
  if (!/^[A-Z]{5}$/.test(raw)) {
    showMsg("Please enter 5 letters (A–Z).", true);
    return;
  }
  if (!wordList.has(raw)) {
    showMsg("Not a real word.", true);
    return;
  }
  const guessArray = raw.split("");
  const correctArray = correctWord.split("");
  const rowStart = attempts * 5;
  const remaining = {};
  for (let i = 0; i < 5; i++) {
    if (guessArray[i] === correctArray[i]) {
      const tile = grid.children[rowStart + i];
      tile.textContent = guessArray[i];
      tile.classList.add("green");
      setKeyColor(guessArray[i], "green");
    } else {
      remaining[correctArray[i]] = (remaining[correctArray[i]] || 0) + 1;
    }
  }
  for (let i = 0; i < 5; i++) {
    const tile = grid.children[rowStart + i];
    if (tile.textContent) continue;
    const ch = guessArray[i];
    tile.textContent = ch;
    if (remaining[ch]) {
      tile.classList.add("yellow");
      remaining[ch]--;
      setKeyColor(ch, "yellow");
    } else {
      tile.classList.add("grey");
      setKeyColor(ch, "grey");
    }
  }
  attempts++;
  input.value = "";
  showMsg("");
  if (raw === correctWord) {
    showMsg("🎉 You guessed it!");
    gameOver = true;
    input.disabled = true;
  } else if (attempts >= maxAttempts) {
    showMsg("❌ Sorry, you lost! The word was " + correctWord + ".");
    gameOver = true;
    input.disabled = true;
  }
}

/* ---------- UI EVENTS ---------- */
guessBtn.addEventListener("click", submitGuess);
input.addEventListener("keydown", (e) => {
  if (e.key === "Enter") { e.preventDefault(); submitGuess(); }
  else if (e.key === "Backspace") { }
  else {
    if (!/^[a-zA-Z]$/.test(e.key) && e.key.length === 1) e.preventDefault();
    if (/^[a-zA-Z]$/.test(e.key) && input.value.length >= 5) {
      e.preventDefault();
    }
  }
});
</script>
</body>
</html>
